Kode ini bertujuan untuk menganalisis data pelanggan dari sebuah pusat perbelanjaan menggunakan metode eksplorasi data dan algoritma clustering (K-Means). Analisis ini bertujuan untuk memahami profil pelanggan berdasarkan atribut tertentu, seperti usia, pendapatan tahunan, dan skor pengeluaran. Output akhir berupa visualisasi kelompok pelanggan yang dikelompokkan berdasarkan karakteristik yang serupa.

Penjelasan Kode
1. Memuat Data
R
Copy code
customers <- read.csv("~/Desktop/Mall_Customers.csv.xls", stringsAsFactors=TRUE)
View(customers)
Tujuan: Membaca file data pelanggan (Mall_Customers.csv.xls) dan menyimpannya dalam variabel customers. Data ini diatur agar kolom kategori otomatis dikenali sebagai factor.
View(customers): Menampilkan data dalam bentuk tabel interaktif.
2. Library dan Pengaturan Awal
R
Copy code
library(ggplot2); theme_set(theme_bw())
library(dplyr)
library(skmeans)
library(gridExtra)
attach(customers)
Tujuan: Memuat pustaka:
ggplot2: Untuk membuat visualisasi data.
dplyr: Untuk manipulasi data.
skmeans: Untuk analisis spherical k-means (tidak digunakan langsung di kode ini).
gridExtra: Untuk tata letak beberapa plot dalam satu grid.
theme_set(theme_bw()): Mengatur tema default visualisasi menjadi tema bersih (putih).
attach(customers): Mempermudah akses kolom data tanpa memanggil nama dataset secara eksplisit.
3. Eksplorasi Data
Dimensi dan Struktur Data
R
Copy code
dim(customers)
str(customers)
n_distinct(CustomerID)
Tujuan:
dim(customers): Melihat jumlah baris dan kolom dalam dataset.
str(customers): Menampilkan struktur dataset (tipe data tiap kolom).
n_distinct(CustomerID): Menghitung jumlah pelanggan unik.
Distribusi Gender
R
Copy code
as.data.frame(table(Gender))  %>%
ggplot(aes(x = Gender, y = Freq))  +
geom_bar(stat = "identity", fill = "#F8766D") +
geom_text(y = as.vector(table(Gender)), label = paste0((as.vector(table(Gender))/sum(as.vector(table(Gender))))*100, "%"))
Tujuan:
Menghitung jumlah pelanggan berdasarkan jenis kelamin (Gender).
Membuat diagram batang untuk distribusi gender, dengan persentase ditampilkan pada setiap batang.
Statistik dan Visualisasi Usia
R
Copy code
summary(Age)
ggplot(as.data.frame(Age), aes(y = Age)) + geom_boxplot(fill='#F8766D')
ggplot(customers, aes(x = Age, fill = Gender)) + geom_density(alpha = 0.4)
Tujuan:
summary(Age): Menampilkan statistik deskriptif usia.
Membuat boxplot usia untuk memahami distribusi dan mendeteksi pencilan.
Membuat grafik kepadatan (density plot) usia berdasarkan jenis kelamin.
Pendapatan Tahunan dan Skor Pengeluaran
R
Copy code
p1 <- ggplot(as.data.frame(Annual.Income..k..), aes(y = Annual.Income..k..)) + geom_boxplot(fill='#F8766D') + ylim(c(1,150))
p2 <- ggplot(as.data.frame(Spending.Score..1.100.), aes(y = Spending.Score..1.100.)) + geom_boxplot(fill='#00BFC4') + ylim(c(1,150))
grid.arrange(p1, p2, ncol = 2)
Tujuan:
Membuat boxplot untuk memahami distribusi pendapatan tahunan (Annual.Income..k..) dan skor pengeluaran (Spending.Score..1.100.).
Menggunakan grid.arrange untuk menampilkan kedua plot dalam satu baris.
4. Analisis Missing Values
R
Copy code
cat("There are", sum(is.na(customers)), "N/A values.")
Tujuan: Menghitung jumlah nilai yang hilang (missing values) dalam dataset.
5. Clustering dengan K-Means
Menentukan Jumlah Klaster (Elbow Method)
R
Copy code
Kdata <- customers[,c(4,5)]
tot.withinss <- vector("numeric", length = 10)
for (i in 1:10){
  kDet <- kmeans(Kdata, i)
  tot.withinss[i] <- kDet$tot.withinss
}
ggplot(as.data.frame(tot.withinss), aes(x = seq(1,10), y = tot.withinss)) +
geom_point(col = "#F8766D") +
geom_line(col = "#F8766D") +
theme(axis.title.x.bottom = element_blank()) +
ylab("Within-cluster Sum of Squares") +
xlab("Number of Clusters") +
ggtitle("Elbow K Estimation")
Tujuan:
Kdata: Membuat subset data dengan kolom pendapatan tahunan dan skor pengeluaran.
Elbow Method: Menghitung jumlah kuadrat dalam klaster untuk berbagai jumlah klaster (1-10).
Membuat grafik elbow untuk menentukan jumlah klaster optimal.
Membuat Klaster dan Visualisasi
R
Copy code
customerClusters <- kmeans(Kdata, 5)
ggplot(Kdata, aes(x = Annual.Income..k.., y = Spending.Score..1.100.)) +
geom_point(stat = "identity", aes(color = as.factor(customerClusters$cluster))) +
scale_color_discrete(name=" ",
breaks=c("1", "2", "3", "4", "5"),
labels=c("Cluster 1", "Cluster 2", "Cluster 3", "Cluster 4", "Cluster 5")) +
ggtitle("Mall Customer Segments", subtitle = "K-means Clustering")
Tujuan:
Membagi pelanggan menjadi 5 klaster menggunakan algoritma K-Means.
Membuat visualisasi scatter plot, dengan warna mewakili klaster masing-masing pelanggan.
6. Menyimpan Riwayat
R
Copy code
savehistory("~/DAP.Rhistory")
Tujuan: Menyimpan riwayat perintah R ke file untuk dokumentasi.
Kesimpulan
Kode ini melakukan analisis menyeluruh terhadap data pelanggan, mulai dari eksplorasi distribusi data, mendeteksi pola dengan visualisasi, hingga mengelompokkan pelanggan menggunakan K-Means. Hasilnya memberikan wawasan tentang segmentasi pelanggan berdasarkan pendapatan dan kebiasaan belanja.
